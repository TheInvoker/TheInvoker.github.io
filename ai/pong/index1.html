 <!DOCTYPE html>
<html>
	<head>
		<title>Sender</title>

		<style>

		</style>
	</head>

	<body>
		<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
		<script src="synaptic.min.js"></script>
		
		<script>
			var learningRate = .3;
			var totalTrainingItems = 0;
			
			var Layer = synaptic.Layer;
			var Network = synaptic.Network;
			// create the network
			var inputLayer = new Layer(2);
			var hiddenLayer = new Layer(3);
			var outputLayer = new Layer(1);

			inputLayer.project(hiddenLayer);
			hiddenLayer.project(outputLayer);

			var myNetwork = new Network({
				input: inputLayer,
				hidden: [hiddenLayer],
				output: outputLayer
			});
			
			function receiveMessage(event) {
				if (event.data.id == 0) {
				    totalTrainingItems += 1;
				    document.getElementById("totalItems").innerHTML = totalTrainingItems;
				    myNetwork.activate([event.data.message[0], event.data.message[1]]);
				    myNetwork.propagate(learningRate, [event.data.message[2]]);  	
				} else if (event.data.id == 1) {
				    var p = myNetwork.activate([event.data.message[0], event.data.message[1]]);
				    event.source.postMessage({'id':1, 'message':p}, "https://theinvoker.github.io");
				}
			}
			window.addEventListener("message", receiveMessage, false);
			
			function newPopup() {
				var popup = window.open('./index.html', '_blank', 'location=yes,height=362,width=439,scrollbars=yes,status=yes');

				popup.addEventListener('load', function() {
				    popup.postMessage({'id':0}, "https://theinvoker.github.io");
				}, true); 
			}
			
			newPopup();

		</script>
		
		Total Training Size
		<div id="totalItems">0</div>
		<button id="spawnnew" onclick="newPopup();">Spawn AI Trainer</button>
		
	</body>

</html> 
